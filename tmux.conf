#
# Configuration borrowed from multiple sources:
#
#   * Vim-like bindings from Daniel Thau (distributed via Homebrew)
#   * General config from Josh Clayton of Thoughtbot
#   * General config from http://www.danielmiessler.com/study/tmux/
#   * Colors from http://zanshin.net/2013/09/05/my-tmux-configuration/
#

# Override the default 2000 lines of scrollback.
set -g history-limit 10000

# Run a normal bash shell (i.e., NOT a login shell).
set -g default-command bash

# Use emacs (readline) style key bindings for the command prompt.
set -g status-keys emacs

# Set colors. This very important to get vim looking right.
set -g default-terminal "screen-256color"

# Count windows and panes starting at 1.
set -g base-index 1
setw -g pane-base-index 1

# Vim-style controls for copy mode.
setw -g mode-keys vi

# Ctrl-B twice to switch to jump between two most recent windows.
bind-key ^B select-window -l

# Move around panes with vim-like movement commands.
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Clear history for a pane. The no-op shell command is necessary to allow the
# Ctrl-l to get through to the shell before the clear-history command is
# executed by our tmux session.
bind-key ^K send-keys ^l \; run-shell ":" \; clear-history

# Force a reload of the config file.
bind-key R source-file ~/.tmux.conf

# No window name, time, or date on right side of status bar.
set-option -g status-right ""
set-option -g status-right-length 0

# Status bar styles.
set-option -g status-bg black #base02
set-option -g status-fg cyan
set-window-option -g window-status-fg brightblue #base0
set-window-option -g window-status-bg black
set-window-option -g window-status-current-fg brightred #orange
set-window-option -g window-status-current-bg black

# Source local configuration; the for loop is unnecessary but a concise way to
# check for existence.
run-shell "for conf in ~/.local/etc/tmux/local.conf; do tmux source-file \"\$conf\"; done"

# Source version-specific configuration.
run-shell "for conf in ~/.local/etc/tmux/*$(tmux -V | cut -d' ' -f2).conf; do tmux source-file \"\$conf\"; done"
